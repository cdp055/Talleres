# Taller Individual  3
## Reactive Stream

**Semana**: 9

**Objetivos**:

- Aplicar los conocimientos sobre Reactive Stream.
- Generar y procesar flujos de datos reactivos.



### DescripciÃ³n:

Resuelva los siguientes problemas.

### Problema 1
**SincronizaciÃ³n de Sensores**

DescripciÃ³n: Simula dos sensores que emiten valores periÃ³dicos:

- Sensor1: Rango [20Â°C, 30Â°C], cada 1 segundo.
- Sensor2: Rango [30Â°C, 40Â°C], cada 1.5 segundos.
- Usa zip para combinar los valores de ambos sensores en un solo flujo.
- DetÃ©n el flujo despuÃ©s de 10 pares de valores.
- Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5Â°C.
  

```Scala
package Semana9
//DescripciÃ³n: Simula dos sensores que emiten valores periÃ³dicos:
//Sensor1: Rango [20Â°C, 30Â°C], cada 1 segundo.
//Sensor2: Rango [30Â°C, 40Â°C], cada 1.5 segundos.
//Usa zip para combinar los valores de ambos sensores en un solo flujo.
//DetÃ©n el flujo despuÃ©s de 10 pares de valores.
//Genera una alerta si la diferencia absoluta entre las lecturas de Sensor1 y Sensor2 es mayor a 5Â°C.
import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object Sensor extends App {

  //  Sensor1: Rango [20Â°C, 30Â°C], cada 1 segundo.
  val sensor1 = Observable.interval(1.second).map(_ => Random.between(20, 30))
  // Sensor2: Rango [30Â°C, 40Â°C], cada 1.5 segundo.
  val sensor2 = Observable.interval(1500.millis).map(_ => Random.between(30, 40))

  // Combinar valores de ambos sensores
  sensor1.zip(sensor2)
    .take(10)
    .subscribe(
      onNext = {
        case (temp1, temp2) =>
          val diff = Math.abs(temp1 - temp2)
          println(s"Sensor1: $temp1Â°C, Sensor2: $temp2Â°C, Difference: $diffÂ°C")

          // Alerta si diferencia > 5
          if (diff > 5) {
            println(s" Alerta! Se detecto una diferencia significativa: $diffÂ°C")
          }
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("Stream completed!")
    )

  // Mantener la aplicaciÃ³n viva el tiempo suficiente
  Thread.sleep(17000)
}

```

```mathematica
Sensor1: 22Â°C, Sensor2: 27Â°C, Difference: 5Â°C
Sensor1: 24Â°C, Sensor2: 34Â°C, Difference: 10Â°C
ğŸš¨ ALERT! Significant difference detected: 10Â°C
```

### Problema 2
**Sistema de Alerta Complejo**

DescripciÃ³n: Simula tres sensores que emiten datos periÃ³dicos:

- Sensor1: Temperatura (20Â°C a 30Â°C).
- Sensor2: Humedad (40% a 60%).
- Sensor3: PresiÃ³n (950 hPa a 1050 hPa).
- Combina los datos de los tres sensores y detecta si alguna de las mÃ©tricas estÃ¡ fuera de rango.
- DetÃ©n el flujo despuÃ©s de 20 combinaciones.


```Scala
package Semana9
//DescripciÃ³n: Simula tres sensores que emiten datos periÃ³dicos:
//Sensor1: Temperatura (20Â°C a 30Â°C).
//Sensor2: Humedad (40% a 60%).
//Sensor3: PresiÃ³n (950 hPa a 1050 hPa).
//Combina los datos de los tres sensores y detecta si alguna de las mÃ©tricas estÃ¡ fuera de rango.
//DetÃ©n el flujo despuÃ©s de 20 combinaciones.
import rx.lang.scala.Observable
import scala.util.Random
import scala.concurrent.duration._

object ComplexAlertSystem extends App {

  // Sensor de Temperatura:rango 20-30
  val sensorTemp = Observable.interval(1.second).map(_ => Random.between(20, 30))

  // Sensor de Humedad: rango 40%-60%
  val sensorHumidity = Observable.interval(1200.millis).map(_ => Random.between(40, 60))

  // Sensor de PresiÃ³n: rango 950-1050 hPa
  val sensorPressure = Observable.interval(1500.millis).map(_ => Random.between(950, 1050))

  // Combinar los tres sensores
  sensorTemp
    .zip(sensorHumidity)
    .zip(sensorPressure)
    .map { case ((temp, hum), pres) => (temp, hum, pres) }
    .take(20)
    .subscribe(
      onNext = {
        case (temp, hum, pres) =>
          println(s"Temperature: $tempÂ°C, Humidity: $hum%, Pressure: $pres hPa")
          
          if (temp < 20 || temp > 30)
            println(s"ğŸš¨ ALERT! Temperature out of range: $tempÂ°C")

          if (hum < 40 || hum > 60)
            println(s"ğŸš¨ ALERT! Humidity out of range: $hum%")

          if (pres < 950 || pres > 1050)
            println(s"ğŸš¨ ALERT! Pressure out of range: $pres hPa")
      },
      onError = e => println(s"Error: ${e.getMessage}"),
      onCompleted = () => println("Stream completed!")
    )

  // Mantener la app viva
  Thread.sleep(32000)
}

```

```yaml
Temperature: 22Â°C, Humidity: 50%, Pressure: 970 hPa
Temperature: 25Â°C, Humidity: 42%, Pressure: 1055 hPa
ğŸš¨ ALERT! Pressure out of range: 1055 hPa
...
```

### CalificaciÃ³n:

Para la calificaciÃ³n, se debe presentar el trabajo realizado a su tutor. Es necesario recalcar que la presentaciÃ³n se hace una Ãºnica vez, no existe la posibilidad de presentaciones adicionales con correcciones.

- 10 puntos si presenta en el horario de prÃ¡cticas y experimentaciÃ³n.
- 7 puntos presenta en el horario de tutorÃ­a

La hora mÃ¡xima de presentaciÃ³n serÃ¡ las 16h30
